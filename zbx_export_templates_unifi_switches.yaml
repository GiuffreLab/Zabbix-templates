zabbix_export:
  version: '7.2'
  template_groups:
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: 6fcde539082d4b138e5c4242383136f3
      template: 'Unifi Switches'
      name: 'Unifi Switches'
      templates:
        - name: 'ICMP Ping'
      groups:
        - name: 'Templates/Network devices'
      items:
        - uuid: c739bfd4113640bf933b56c60d3d0625
          name: 'CPU Load 1m'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.10.1.3.1
          key: laLoadFloat.1
          value_type: FLOAT
          trends: '0'
          tags:
            - tag: Application
              value: CPU
        - uuid: 058dba739c974dfcbcdcf00aa141feff
          name: 'CPU Load 5m'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.10.1.3.2
          key: laLoadFloat.2
          value_type: FLOAT
          trends: '0'
          tags:
            - tag: Application
              value: CPU
        - uuid: dbc99f053c8f490bb3e2f99b8249bd64
          name: 'CPU Load 15m'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.10.1.3.3
          key: laLoadFloat.3
          value_type: FLOAT
          trends: '0'
          tags:
            - tag: Application
              value: CPU
        - uuid: f7d03147e4bb4e3f9b97dbb29d9b8014
          name: 'Available RAM'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.4.6.0
          key: memAvailReal.0
          units: kB
          tags:
            - tag: Application
              value: Memory
        - uuid: 6978bd8d44a0483ebbc3c93cec280562
          name: 'Total RAM'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.4.1.2021.4.5.0
          key: memTotalReal.0
          units: kB
          tags:
            - tag: Application
              value: Memory
        - uuid: 61cb6423b4aa452491870b1a5df08101
          name: 'SNMP Interface Discovery Source'
          type: SNMP_AGENT
          snmp_oid: 'walk[1.3.6.1.2.1.2.2.1.2,1.3.6.1.2.1.2.2.1.3,1.3.6.1.2.1.2.2.1.8,1.3.6.1.2.1.31.1.1.1.18]'
          key: snmp.if.discovery
          value_type: TEXT
        - uuid: d9d5eac6042f4f68af821e9876d50cc0
          name: Contact
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.4.0
          key: sysContact.0
          value_type: TEXT
          inventory_link: CONTACT
          tags:
            - tag: Application
              value: System
        - uuid: 1290419e03274bf5a71c90fb9f2c2817
          name: 'System Description (raw firmware string)'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.1.0
          key: sysDescr.0
          value_type: TEXT
          inventory_link: SOFTWARE
          tags:
            - tag: Application
              value: System
        - uuid: 3c3fcde33a154517b44f4dc709b6d0de
          name: Location
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.6.0
          key: sysLocation.0
          value_type: TEXT
          inventory_link: LOCATION
          tags:
            - tag: Application
              value: System
        - uuid: e6807fb5ab1846a28faa3bcaa84f61a4
          name: Hostname
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.5.0
          key: sysName.0
          value_type: TEXT
          inventory_link: NAME
          tags:
            - tag: Application
              value: System
        - uuid: f4871f5b1661467a9308636e2695f058
          name: 'Uptime (clean format)'
          type: SNMP_AGENT
          snmp_oid: .1.3.6.1.2.1.1.3.0
          key: sysUpTime.clean
          value_type: TEXT
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - 'return Math.floor(value/8640000)+'' days, ''+Math.floor(value%8640000/360000)+'' hours, ''+Math.floor(value%360000/6000)+'' minutes, ''+Math.floor(value%6000/100)+'' seconds'';'
          tags:
            - tag: Application
              value: System
      discovery_rules:
        - uuid: 958e96d82aa44657ba7c6f33548fd373
          name: 'Discover SNMP Interfaces'
          type: DEPENDENT
          key: snmp.if.discovery.lld
          filter:
            conditions:
              - macro: '{#IFOPERSTATUS}'
                value: ^1$
              - macro: '{#IFTYPE}'
                value: ^6$
          item_prototypes:
            - uuid: 208a8653eaba4e37a37c6c0059634674
              name: 'Inbound traffic on {#IFDESCR} ({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.10.{#SNMPINDEX}'
              key: 'ifInOctets[{#SNMPINDEX}]'
              units: bps
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: Application
                  value: Interfaces
            - uuid: 22ad5eecd86542859268923cf1e1042d
              name: 'Outbound traffic on {#IFDESCR} ({#IFALIAS})'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.2.1.2.2.1.16.{#SNMPINDEX}'
              key: 'ifOutOctets[{#SNMPINDEX}]'
              units: bps
              preprocessing:
                - type: CHANGE_PER_SECOND
                - type: MULTIPLIER
                  parameters:
                    - '8'
              tags:
                - tag: Application
                  value: Interfaces
          graph_prototypes:
            - uuid: 39e8726d5b74484e997a5b6b0a01d03d
              name: 'Interface Traffic on {#IFDESCR} ({#IFALIAS})'
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Unifi Switches'
                    key: 'ifInOctets[{#SNMPINDEX}]'
                - sortorder: '1'
                  color: 0040FF
                  item:
                    host: 'Unifi Switches'
                    key: 'ifOutOctets[{#SNMPINDEX}]'
          master_item:
            key: snmp.if.discovery
          preprocessing:
            - type: SNMP_WALK_TO_JSON
              parameters:
                - '{#SNMPINDEX}'
                - 1.3.6.1.2.1.2.2.1.2
                - '0'
                - '{#IFDESCR}'
                - 1.3.6.1.2.1.2.2.1.2
                - '0'
                - '{#IFTYPE}'
                - 1.3.6.1.2.1.2.2.1.3
                - '0'
                - '{#IFOPERSTATUS}'
                - 1.3.6.1.2.1.2.2.1.8
                - '0'
                - '{#IFALIAS}'
                - 1.3.6.1.2.1.31.1.1.1.18
                - '0'
      tags:
        - tag: class
          value: network
        - tag: target
          value: switch
        - tag: target
          value: ubiquiti
      macros:
        - macro: '{$SNMP_COMMUNITY}'
          value: giuffrelab
        - macro: '{$SNMP_PORT}'
          value: '161'
